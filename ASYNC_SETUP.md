# üöÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞–≥–∏–∞—Ç–∞ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **Celery –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **Advanced Plagiarism Detector** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä —Å 5+ –º–µ—Ç—Ä–∏–∫–∞–º–∏
3. **Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
4. **UI —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏** - –∂–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
5. **Flower –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –∑–∞–¥–∞—á

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (< 1 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 30-60 —Å–µ–∫)
- üîÑ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 4-8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞: shingles, word/char/sentence similarity
- üéöÔ∏è –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–∞ –ø–ª–∞–≥–∏–∞—Ç–∞: very_low ‚Üí very_high
- üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Redis
- üîÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
POSTGRES_DB=plagiarism_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã):
```bash
python Folder/manage.py migrate documents
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose:
```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker compose build

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker compose ps
```

–°–µ—Ä–≤–∏—Å—ã:
- `db` (PostgreSQL + pgvector) - –ø–æ—Ä—Ç 5432
- `redis` - –ø–æ—Ä—Ç 6379
- `web` (Django) - –ø–æ—Ä—Ç 8080
- `celery` (worker –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- `flower` (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥) - –ø–æ—Ä—Ç 5555

### 4. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:8080
- Flower (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery): http://localhost:5555

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080/documents/cabinet/
2. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, –∑–∞–≥—Ä—É–∑–∏—Ç–µ PDF
4. –î–æ–∫—É–º–µ–Ω—Ç –ø–æ—è–≤–∏—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "‚è≥ –í –æ—á–µ—Ä–µ–¥–∏"
5. –ß–µ—Ä–µ–∑ 5-10 —Å–µ–∫ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "üîÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è..."
6. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
7. –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å + –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Celery –∑–∞–¥–∞—á –≤ Flower:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5555
2. –í–∫–ª–∞–¥–∫–∞ "Tasks" - –≤—Å–µ –∑–∞–¥–∞—á–∏
3. –í–∫–ª–∞–¥–∫–∞ "Workers" - –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
4. –í–∫–ª–∞–¥–∫–∞ "Monitor" - –∂–∏–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ü–µ—Ä–µ—Å—á—ë—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```bash
# –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
docker compose exec web python manage.py reprocess_documents --all

# –¢–æ–ª—å–∫–æ —Å –æ—à–∏–±–∫–∞–º–∏
docker compose exec web python manage.py reprocess_documents --failed

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ ID
docker compose exec web python manage.py reprocess_documents --ids 1,2,3
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ Celery worker:
```bash
docker compose logs -f celery
```

### –õ–æ–≥–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
docker compose logs -f web
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ Redis:
```bash
docker compose exec redis redis-cli
> KEYS *
> LLEN celery
```

### Django shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
```bash
docker compose exec web python manage.py shell
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Celery workers:
–í `docker-compose.yml` –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```yaml
command: celery -A Folder.app worker --loglevel=info --concurrency=4
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á:
```python
# –í –∫–æ–¥–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
process_document_plagiarism.apply_async(
    args=[document.id],
    priority=9  # 0-9, –≥–¥–µ 9 - highest
)
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –Ω–æ–≤–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞

### –¢–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∞:
1. **shingle_1** (–≤–µ—Å 0.3) - –ø–æ—Å–ª–æ–≤–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
2. **shingle_3** (–≤–µ—Å 0.4) - —Ç—Ä–∏–≥—Ä–∞–º–º—ã
3. **shingle_5** (–≤–µ—Å 0.2) - –ø—è—Ç–∏–≥—Ä–∞–º–º—ã
4. **word_similarity** (–≤–µ—Å 0.1) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
5. **char_similarity** - –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ–µ
6. **sentence_similarity** - –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º

### –£—Ä–æ–≤–Ω–∏ —Ä–∏—Å–∫–∞:
- `very_low` - —Å—Ö–æ–∂–µ—Å—Ç—å < 0.5
- `low` - —Å—Ö–æ–∂–µ—Å—Ç—å 0.5-0.7
- `medium` - —Å—Ö–æ–∂–µ—Å—Ç—å 0.7-0.8
- `high` - —Å—Ö–æ–∂–µ—Å—Ç—å 0.8-0.9
- `very_high` - —Å—Ö–æ–∂–µ—Å—Ç—å > 0.9

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Celery –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Redis:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
docker compose ps redis

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose restart redis celery
```

### –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ worker
docker compose logs celery

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å worker
docker compose restart celery
```

### –°—Ç–∞—Ä—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±–µ–∑ processing_status:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
docker compose exec web python manage.py shell -c "from documents.models import Document; Document.objects.filter(processing_status__isnull=True).update(processing_status='completed')"
```

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```
Folder/
‚îú‚îÄ‚îÄ documents/
‚îÇ   ‚îú‚îÄ‚îÄ detectors/              # üÜï –ú–æ–¥—É–ª—å –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_detector.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ advanced_detector.py
‚îÇ   ‚îú‚îÄ‚îÄ tasks.py                # üÜï Celery –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ utils_cache.py          # üÜï Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # ‚úèÔ∏è +processing_* –ø–æ–ª—è, —Å–∏–≥–Ω–∞–ª—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ views.py                # ‚úèÔ∏è +Celery –æ—Ç–ø—Ä–∞–≤–∫–∞, +API —Å—Ç–∞—Ç—É—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                 # ‚úèÔ∏è +document_status endpoint
‚îÇ   ‚îî‚îÄ‚îÄ management/commands/
‚îÇ       ‚îî‚îÄ‚îÄ reprocess_documents.py  # üÜï –ü–µ—Ä–µ—Å—á—ë—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îî‚îÄ‚îÄ celery.py               # ‚úèÔ∏è –†–æ—É—Ç–∏–Ω–≥, worker settings
‚îú‚îÄ‚îÄ static/css/main.css         # ‚úèÔ∏è –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ templates/documents/
    ‚îî‚îÄ‚îÄ cab.html                # ‚úèÔ∏è AJAX-–æ–ø—Ä–æ—Å, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

–£–¥–∞–ª–µ–Ω—ã –∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- plagiarism_detector.py (–ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞)
- advanced_plagiarism_detector.py (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω ‚Üí detectors/)
```

---

## üéâ –ò—Ç–æ–≥

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–º –ø–ª–∞–≥–∏–∞—Ç–∞. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ–æ–Ω–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
